{"version":3,"names":["useCallback","useEffect","useRef","Platform","finishTransaction","iapFinishTransaction","getAvailablePurchases","iapGetAvailablePurchases","getProducts","iapGetProducts","getPurchaseHistory","iapGetPurchaseHistory","getSubscriptions","iapGetSubscriptions","requestPurchase","iapRequestPurchase","requestSubscription","iapRequestSubscription","sync","validateReceiptIos","useIAPContext","useIAP","options","connected","products","promotedProductsIOS","subscriptions","purchaseHistory","availablePurchases","currentPurchase","currentPurchaseError","initConnectionError","setConnected","setProducts","setSubscriptions","setAvailablePurchases","setPurchaseHistory","setCurrentPurchase","setCurrentPurchaseError","optionsRef","current","mergeWithDuplicateCheck","existingItems","newItems","getKey","merged","forEach","newItem","isDuplicate","some","existingItem","push","clearCurrentPurchase","undefined","clearCurrentPurchaseError","skus","result","product","productId","error","console","subscription","purchase","isConsumable","developerPayloadAndroid","err","restorePurchases","_optionsRef$current","OS","shouldAutoSyncPurchases","syncError","_optionsRef$current2","_optionsRef$current2$","onSyncError","call","validateReceipt","sku","androidOptions","warn","isValid","message","Error","_optionsRef$current3","onPurchaseSuccess","_optionsRef$current4","onPurchaseError"],"sourceRoot":"../../../src","sources":["hooks/useIAP.ts"],"mappings":"AAAA,SAAQA,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAO,OAAO;AACpD,SAAQC,QAAQ,QAAO,cAAc;AAErC,SACEC,iBAAiB,IAAIC,oBAAoB,EACzCC,qBAAqB,IAAIC,wBAAwB,EACjDC,WAAW,IAAIC,cAAc,EAC7BC,kBAAkB,IAAIC,qBAAqB,EAC3CC,gBAAgB,IAAIC,mBAAmB,EACvCC,eAAe,IAAIC,kBAAkB,EACrCC,mBAAmB,IAAIC,sBAAsB,QACxC,QAAQ;AACf,SAAQC,IAAI,EAAEC,kBAAkB,QAAO,mBAAmB;AAI1D,SAAQC,aAAa,QAAO,kBAAkB;AAgD9C,OAAO,MAAMC,MAAM,GAAIC,OAAuB,IAAiB;EAC7D,MAAM;IACJC,SAAS;IACTC,QAAQ;IACRC,mBAAmB;IACnBC,aAAa;IACbC,eAAe;IACfC,kBAAkB;IAClBC,eAAe;IACfC,oBAAoB;IACpBC,mBAAmB;IACnBC,YAAY;IACZC,WAAW;IACXC,gBAAgB;IAChBC,qBAAqB;IACrBC,kBAAkB;IAClBC,kBAAkB;IAClBC;EACF,CAAC,GAAGlB,aAAa,CAAC,CAAC;EAEnB,MAAMmB,UAAU,GAAGrC,MAAM,CAA4BoB,OAAO,CAAC;EAE7DrB,SAAS,CAAC,MAAM;IACdsC,UAAU,CAACC,OAAO,GAAGlB,OAAO;EAC9B,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;;EAEb;EACA,MAAMmB,uBAAuB,GAAGzC,WAAW,CACzC,CACE0C,aAAkB,EAClBC,QAAa,EACbC,MAA2B,KACnB;IACR,MAAMC,MAAM,GAAG,CAAC,GAAGH,aAAa,CAAC;IACjCC,QAAQ,CAACG,OAAO,CAAEC,OAAO,IAAK;MAC5B,MAAMC,WAAW,GAAGH,MAAM,CAACI,IAAI,CAC5BC,YAAY,IAAKN,MAAM,CAACM,YAAY,CAAC,KAAKN,MAAM,CAACG,OAAO,CAC3D,CAAC;MACD,IAAI,CAACC,WAAW,EAAE;QAChBH,MAAM,CAACM,IAAI,CAACJ,OAAO,CAAC;MACtB;IACF,CAAC,CAAC;IACF,OAAOF,MAAM;EACf,CAAC,EACD,EACF,CAAC;EAED,MAAMO,oBAAoB,GAAGpD,WAAW,CAAC,MAAM;IAC7CqC,kBAAkB,CAACgB,SAAS,CAAC;EAC/B,CAAC,EAAE,CAAChB,kBAAkB,CAAC,CAAC;EAExB,MAAMiB,yBAAyB,GAAGtD,WAAW,CAAC,MAAM;IAClDsC,uBAAuB,CAACe,SAAS,CAAC;EACpC,CAAC,EAAE,CAACf,uBAAuB,CAAC,CAAC;EAE7B,MAAM9B,WAAW,GAAGR,WAAW,CAC7B,OAAO;IAACuD;EAAsB,CAAC,KAAoB;IACjD,IAAI;MACF,MAAMC,MAAM,GAAG,MAAM/C,cAAc,CAAC;QAAC8C;MAAI,CAAC,CAAC;MAC3CtB,WAAW,CACTQ,uBAAuB,CACrBjB,QAAQ,EACRgC,MAAM,EACLC,OAAO,IAAMA,OAAO,CAAaC,SAAS,IAAI,EACjD,CACF,CAAC;IACH,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF,CAAC,EACD,CAAC1B,WAAW,EAAEQ,uBAAuB,EAAEjB,QAAQ,CACjD,CAAC;EAED,MAAMZ,gBAAgB,GAAGZ,WAAW,CAClC,OAAO;IAACuD;EAAsB,CAAC,KAAoB;IACjD,IAAI;MACF,MAAMC,MAAM,GAAG,MAAM3C,mBAAmB,CAAC;QAAC0C;MAAI,CAAC,CAAC;MAChDrB,gBAAgB,CACdO,uBAAuB,CACrBf,aAAa,EACb8B,MAAM,EACLK,YAAY,IAAMA,YAAY,CAAkBH,SAAS,IAAI,EAChE,CACF,CAAC;IACH,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACtD;EACF,CAAC,EACD,CAACzB,gBAAgB,EAAEO,uBAAuB,EAAEf,aAAa,CAC3D,CAAC;EAED,MAAMpB,qBAAqB,GAAGN,WAAW,CAAC,YAA2B;IACnE,IAAI;MACF,MAAMwD,MAAM,GAAG,MAAMjD,wBAAwB,CAAC,CAAC;MAC/C4B,qBAAqB,CAACqB,MAAM,CAAC;IAC/B,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;IAC5D;EACF,CAAC,EAAE,CAACxB,qBAAqB,CAAC,CAAC;EAE3B,MAAMzB,kBAAkB,GAAGV,WAAW,CAAC,YAA2B;IAChE,IAAI;MACF,MAAMwD,MAAM,GAAG,MAAM7C,qBAAqB,CAAC,CAAC;MAC5CyB,kBAAkB,CAACoB,MAAM,CAAC;IAC5B,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACzD;EACF,CAAC,EAAE,CAACvB,kBAAkB,CAAC,CAAC;EAExB,MAAMhC,iBAAiB,GAAGJ,WAAW,CACnC,OAAO;IACL8D,QAAQ;IACRC,YAAY;IACZC;EAKF,CAAC,KAAwD;IACvD,IAAI;MACF,OAAO,MAAM3D,oBAAoB,CAAC;QAChCyD,QAAQ;QACRC,YAAY;QACZC;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ,MAAMA,GAAG;IACX,CAAC,SAAS;MACR,IAAIH,QAAQ,CAACJ,SAAS,MAAK7B,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAE6B,SAAS,GAAE;QACrDrB,kBAAkB,CAACgB,SAAS,CAAC;MAC/B;MAEA,IAAIS,QAAQ,CAACJ,SAAS,MAAK5B,oBAAoB,aAApBA,oBAAoB,uBAApBA,oBAAoB,CAAE4B,SAAS,GAAE;QAC1DpB,uBAAuB,CAACe,SAAS,CAAC;MACpC;IACF;EACF,CAAC,EACD,CACExB,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAE6B,SAAS,EAC1B5B,oBAAoB,aAApBA,oBAAoB,uBAApBA,oBAAoB,CAAE4B,SAAS,EAC/BrB,kBAAkB,EAClBC,uBAAuB,CAE3B,CAAC;EAED,MAAM4B,gBAAgB,GAAGlE,WAAW,CAAC,YAA2B;IAC9D,IAAI;MAAA,IAAAmE,mBAAA;MACF;MACA,IACEhE,QAAQ,CAACiE,EAAE,KAAK,KAAK,IACrB,EAAAD,mBAAA,GAAA5B,UAAU,CAACC,OAAO,cAAA2B,mBAAA,uBAAlBA,mBAAA,CAAoBE,uBAAuB,MAAK,KAAK,EACrD;QACA,IAAI;UACF,MAAMnD,IAAI,CAAC,CAAC;QACd,CAAC,CAAC,OAAOoD,SAAS,EAAE;UAAA,IAAAC,oBAAA,EAAAC,qBAAA;UAClBZ,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEW,SAAS,CAAC;UACvC,CAAAC,oBAAA,GAAAhC,UAAU,CAACC,OAAO,cAAA+B,oBAAA,gBAAAC,qBAAA,GAAlBD,oBAAA,CAAoBE,WAAW,cAAAD,qBAAA,eAA/BA,qBAAA,CAAAE,IAAA,CAAAH,oBAAA,EAAkCD,SAAkB,CAAC;QACvD;MACF;;MAEA;MACA,MAAMhE,qBAAqB,CAAC,CAAC;IAC/B,CAAC,CAAC,OAAOqD,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD,MAAMA,KAAK;IACb;EACF,CAAC,EAAE,CAACrD,qBAAqB,CAAC,CAAC;EAE3B,MAAMqE,eAAe,GAAG3E,WAAW,CACjC,OACE4E,GAAW,EACXC,cAKC,KACgB;IACjB,IAAI;MACF,IAAI1E,QAAQ,CAACiE,EAAE,KAAK,KAAK,EAAE;QACzB;QACA,MAAMZ,MAAM,GAAG,MAAMrC,kBAAkB,CAACyD,GAAG,CAAC;QAC5C,OAAOpB,MAAM;MACf,CAAC,MAAM,IAAIrD,QAAQ,CAACiE,EAAE,KAAK,SAAS,IAAIS,cAAc,EAAE;QACtD;QACA;QACAjB,OAAO,CAACkB,IAAI,CACV,4DACF,CAAC;QACD,OAAO;UACLC,OAAO,EAAE,KAAK;UACdC,OAAO,EACL;QACJ,CAAC;MACH;MAEA,MAAM,IAAIC,KAAK,CACb,4DACF,CAAC;IACH,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,MAAMA,KAAK;IACb;EACF,CAAC,EACD,EACF,CAAC;;EAED;EACA1D,SAAS,CAAC,MAAM;IAAA,IAAAiF,oBAAA;IACd,IAAIrD,eAAe,KAAAqD,oBAAA,GAAI3C,UAAU,CAACC,OAAO,cAAA0C,oBAAA,eAAlBA,oBAAA,CAAoBC,iBAAiB,EAAE;MAC5D5C,UAAU,CAACC,OAAO,CAAC2C,iBAAiB,CAACtD,eAAe,CAAC;IACvD;EACF,CAAC,EAAE,CAACA,eAAe,CAAC,CAAC;EAErB5B,SAAS,CAAC,MAAM;IAAA,IAAAmF,oBAAA;IACd,IAAItD,oBAAoB,KAAAsD,oBAAA,GAAI7C,UAAU,CAACC,OAAO,cAAA4C,oBAAA,eAAlBA,oBAAA,CAAoBC,eAAe,EAAE;MAC/D9C,UAAU,CAACC,OAAO,CAAC6C,eAAe,CAACvD,oBAAoB,CAAC;IAC1D;EACF,CAAC,EAAE,CAACA,oBAAoB,CAAC,CAAC;EAE1B7B,SAAS,CAAC,MAAM;IACd+B,YAAY,CAAC,IAAI,CAAC;IAElB,OAAO,MAAM;MACXA,YAAY,CAAC,KAAK,CAAC;MACnBM,uBAAuB,CAACe,SAAS,CAAC;IACpC,CAAC;IACD;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACL9B,SAAS;IACTC,QAAQ;IACRC,mBAAmB;IACnBC,aAAa;IACbC,eAAe;IACfC,kBAAkB;IAClBC,eAAe;IACfC,oBAAoB;IACpBC,mBAAmB;IACnBqB,oBAAoB;IACpBE,yBAAyB;IACzBlD,iBAAiB;IACjBI,WAAW;IACXI,gBAAgB;IAChBN,qBAAqB;IACrBI,kBAAkB;IAClBI,eAAe,EAAEC,kBAAkB;IACnCC,mBAAmB,EAAEC,sBAAsB;IAC3CiD,gBAAgB;IAChBS;EACF,CAAC;AACH,CAAC"}